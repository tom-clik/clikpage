<!--

# test CSS menus

Only top level menus as most sub menu functionality require JS

##



--->

<script>
tests = [
	{"id":"horiz", "description":"Horizontal"},
	{"id":"vert", "description":"Vertical"},//2
	{"id":"vert-inline", "description":"Vertical Inline subs", "inherit":"2"},//2a
	{"id":"vert-inline-open", "description":"Vertical Inline subs open", "inherit":"2,2a"},//2b
	{"id":"border", "description":"Manual Border", "inherit":"vert"}, //3
	{"id":"flex", "description":"Flex"},//5
	{"id":"flex_reverse", "description":"Flex Reverse", "inherit":"flex"},//6
	{"id":"icons", "description":"Icons"},//8
	{"id":"icons_right", "description":"Icons right", "inherit":"icons"},//9
	{"id":"onlyicons", "description":"Only icons"}, 
	{"id":"onlyicons_left", "description":"Only icons left", "inherit":"onlyicons"}, 
	{"id":"onlyicons_vert", "description":"Only icons vertical", "inherit":"onlyicons"},
	{"id":"onlyicons_vert_left", "description":"Only icons vertical left", "inherit":"onlyicons,onlyicons_vert"}
];
</script>

<!DOCTYPE html>
<html>
<head>
	<title>Menu test</title>
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/fonts/fonts_local.css">
	<link rel="stylesheet" href="../css/grids.css">
	<link rel="stylesheet" href="../css/menus.css">
	<link rel="stylesheet" href="../css/fonts/google_icons_local.css">
	<link rel="stylesheet" href="../css/icons.css">

	<meta charset="UTF-8">
	<style>
		body {
			--title-font:'Open Sans';
			padding:20px;
		}

		#menu {
			margin-top:2em;
		}

		.title {
			font-size: 200%;
			font-weight: bold;
		}

		.title {
			font-size: 140%;
			font-weight: bold;
		}

		/*	 */
		
		.menu {
			--menu-item-padding:8px;
			--link-color: #333;
			--menu-background: #c3c3c3;
			--menu-gap:0px;
			--menu-icon-gap:8px;
			--menu-icon-stretch: 0;
			--menu-border-color: #00ffff;
			--menu-openicon-height: 18px;
			--menu-openicon-width: 18px;
		}

		.menu a:hover {
			--link-color: #c3c3c3;
			--menu-background: #ff00ff;
			--menu-border-color: red;
		}

		.menu li.hi a {
			--link-color: #ffff00;
			--menu-background: #c3c3c3;
		}

		.menu.test-horiz {
			--menu-borders:boxes;
			--menu-item-border:1px;
			--menu-submenualign: menu-bottom-left;
		}

		.menu.test-horiz .menu.submenu {
			--menu-orientation: horizontal;
			--menu-stretch:1;
			--menu-borders:boxes;
			--menu-item-border:1px;
		}

		@media screen and (max-width: 800px) {
			.menu.test-horiz {
				--menu-orientation:vertical;
				--menu-borders:dividers;
				--menu-align:left;
			}
		}

		.menu.test-vert {
			--menu-orientation:vertical;
			width: 180px;
			--menu-borders:dividers;
			--menu-item-border:1px;
			--menu-align:left;
			--menu-icon-stretch: 1;
			--menu-submenualign: top-right;
		}

		.menu.test-vert .menu.submenu {
			--menu-borders:dividers;
			--menu-item-border:1px;
			--menu-align:left;
			--menu-orientation:vertical;
		}


		.menu.test-vert-inline {
			--menu-align:right;
			--menu-submenu-show: hide;
			--menu-submenu-position:relative;
		}

		.menu.test-vert-inline .menu.submenu {
			--menu-background: white;
		}

		.menu.test-vert-inline-open {
			--menu-submenu-show: show;
		}

		.menu.test-border {
			--menu-borders:normal;
			--menu-item-border:0 4px 0 0;
			--menu-border-color: var(--menu-background);
			--menu-submenu-position:relative;
		}

		.menu.test-border .menu.submenu {
			--menu-orientation:vertical;
			--menu-borders:normal;
			--menu-item-border:0 4px 0 0;
			--menu-border-color: var(--menu-background);
		}

		.menu.test-border a:hover {
			--menu-background: white;
			--menu-border-color: red;
		}

		.menu.test-flex {
			--menu-mode:flex;
			--menu-align:left;
			--menu-stretch: 0;
			--menu-borders:dividers;
			--menu-item-border:1px;
		}

		.menu.test-flex_reverse {
			--menu-direction: row-reverse;
			--menu-align:right;
		}

		.menu.test-icons {
			--menu-icon-display: block;
		}

		.menu.test-icons_right {
			width: 180px;
			--menu-icon-stretch: 1;
			--menu-orientation:vertical;
			--menu-icon-align:row-reverse;
			--menu-align:right;
		}

		.menu.test-onlyicons {
			--menu-stretch:0;
			--menu-label-display:none;
			--menu-icon-display: block;
			--menu-align:right;
			--menu-icon-gap: 0px;
			--menu-item-padding: 4px;
			--menu-rollout: 1;
			--menu-submenu-show:hide;
		}

		.menu.test-onlyicons_left {
			--menu-align:left;
		}

		.menu.test-onlyicons_vert {
			--menu-orientation:vertical;
			width: var(--menu-icon-width);
			margin: 0 0 0 auto;
		}

		.menu.test-onlyicons_vert_left {
			width: var(--menu-icon-width);
			margin: 0 auto 0 0 ;
			--menu-align:left;
		}

		
	</style>
</head>
<body>

<div class="cs-title">
Menu Testing
</div>

<div id="testmenu">

</div>

<div id="menu" class="menu test-4">
</div>
<!---
<div id="main" class=" menu scheme-vertical scheme-dividers scheme-gridXXX scheme-flexXXX"><ul>

--->

	<script src="/_assets/js/jquery-3.4.1.js"></script>
	<script src="/_assets/js/jquery.throttledresize.js"></script>
	<script src="/_assets/js/varClass.js"></script>
	<script src="/_assets/js/getSettings.js"></script>
	<script src="/_assets/js/removeClassByPrefix.js"></script>
	<script src="/_assets/js/jquery.animateAuto.js"></script>
	<script src="/_assets/js/jquery.menu.js"></script>

	<script src="sampleMenu.js"></script>

	<script type="text/javascript">

		function createMenu(menuData) {
			var menuHTML = `<ul>`;
			for (let item of menuData ) {
				let icon = "icon" in item ? ` class="icon-${item.icon}"` : "" ;
				let submenu = "submenu" in item ? "<div class='menu submenu'>" + createMenu(item.submenu)  + "</div>" : "";
				let href = "link" in item ?  ` href="${item.link}"` : "";
				menuHTML += `<li><a${href} id="menu_${item.id}"><i${icon}></i><span>${item.title}</span></a>${submenu}</li>`;
			}
			menuHTML += "</ul>";
			return menuHTML;
		}

		testStr = getArrayData(tests);

		$(document).ready(function() {

			// Apply the layout class
			var hash = window.location.hash || "#1";
			hash = hash.replace("#","");
			setTest(hash);
			// / end apply layout class
			
			var menuHTML = createMenu(menuData,"menu");

			testStr = getArrayData(tests);

			$("#menu").html(menuHTML);

			
			$("#menu").menu();

			var html = "<select>\n";
			for (let test of tests) {
				selected = test.id == hash ? " selected" : ""; 
				html += `<option ${selected} value="${test.id}">${test.description}</option>\n`;
			}
			html += "</select>\n";

			$(html).appendTo("#testmenu").on("change", function( ) {
				var test = $(this).val()
				setTest(test);
				window.location.hash = test;
			});

		});

		function setTest(test) {
			var $menu = $("#menu");
			$menu.removeClassByPrefix("test-");
			console.log(tests);
			if (test in testStr) {
				testObj = testStr[test];
				testArr = [test];
				if ( "inherit" in testObj ) {
					testArr.push(...testObj.inherit.split(','));
				}
				for (let i of testArr) {
					$menu.addClass("test-" + i);
				}
			}
			else {
				console.log("test " + test + " not found")
			}
			
			$(window).trigger('resize');
			
		}

		function getArrayData(arr) {
			var ret = {};
			for (let row of arr) {
				ret[row.id] = row;
			}
			return ret;
		}


	</script>

</body>
</html>